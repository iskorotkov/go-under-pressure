# docker-compose.bench.yml
# Usage: docker compose -f docker-compose.yml -f docker-compose.bench.yml --profile bench up

services:
  postgres:
    network_mode: host
    logging:
      driver: local
    ports: !reset []

  api:
    network_mode: host
    logging:
      driver: local
    environment:
      POSTGRES_HOST: 127.0.0.1
    ports: !reset []

  grafana:
    network_mode: host
    logging:
      driver: local
    environment:
      GRAFANA_DB_HOST: 127.0.0.1
    ports: !reset []

  bench:
    network_mode: host
    logging:
      driver: local
    environment:
      BASE_URL: http://127.0.0.1:${API_PORT:-8080}
